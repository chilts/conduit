## ----------------------------------------------------------------------------

package CGI::Conduit::Log;

use Moose::Role;
use Projectus::Log qw(init_log);

## ----------------------------------------------------------------------------

has 'log_filename' => ( is => 'rw' );

## ----------------------------------------------------------------------------

# for some reason, this is called twice in startup, even though init() is only
# called once!!!
after 'init' => sub {
    my ($self) = @_;

    init_log( $self->log_filename );
};

## ----------------------------------------------------------------------------
1;
## ----------------------------------------------------------------------------
